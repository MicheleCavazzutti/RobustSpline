
## With R 3.1.0 or later, you can uncomment the following line to tell R to
## enable compilation with C++11 (where available)
##
## Also, OpenMP support in Armadillo prefers C++11 support. However, for wider
## availability of the package we do not yet enforce this here.  It is however
## recommended for client packages to set it.
##
## And with R 3.4.0, and RcppArmadillo 0.7.960.*, we turn C++11 on as OpenMP
## support within Armadillo prefers / requires it
##
## R 4.0.0 made C++11 the default, R 4.1.0 switched to C++14, R 4.3.0 to C++17
## _In general_ we should no longer need to set a standard as any recent R
## installation will do the right thing. Should you need it, uncomment it and
## set the appropriate value, possibly CXX17.
#CXX_STD = CXX11

OSQP_DIR = osqp
OSQP_BUILD = $(OSQP_DIR)/build

# Flag del compilatore
# Aggiungiamo le directory degli header di OSQP
PKG_CPPFLAGS = -I$(OSQP_DIR)/include -I$(OSQP_DIR)/build/include

# Flag del linker
# 1. Includiamo OpenMP, Lapack e Blas
# 2. Puntiamo alla libreria statica corretta (libosqpstatic.a o libosqp.a)
# Nota: il log indicava 'out/libosqpstatic.a'
PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS) $(OSQP_BUILD)/out/libosqpstatic.a

# Opzionale: se CMake genera libosqp.a invece di libosqpstatic.a, usa questa:
# PKG_LIBS = $(SHLIB_OPENMP_CXXFLAGS) $(LAPACK_LIBS) $(BLAS_LIBS) $(FLIBS) $(OSQP_BUILD)/out/libosqp.a

# Mantieni le tue altre impostazioni
PKG_CXXFLAGS = $(SHLIB_OPENMP_CXXFLAGS)
